\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{tikz}
\usepackage[shortlabels]{enumitem}
\usepackage{caption}
\captionsetup[figure]{labelfont={bf},name={Fig.},labelsep=period}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}[section]
\newtheorem*{lemma*}{Lemma}
\newtheorem*{lemmaH}{Lemma H}
\newtheorem*{lemmaS}{Lemma S}
\newtheorem{corollary}{Corollary}
\newtheorem*{corollary*}{Corollary}
\newtheorem*{MP}{Maximum Principle}
\theoremstyle{remark}
\newtheorem{remark}{Remark}
\counterwithin{equation}{section}
\DeclareMathOperator{\tr}{tr}
\renewcommand{\Im}{\operatorname{Im}}

\makeatletter
\newcommand{\neutralize}[1]{\expandafter\let\csname c@#1\endcsname\count@}
\makeatother

\newenvironment{theoremp}[1]
  {\renewcommand{\thetheorem}{\ref*{#1}$'$}%
   \neutralize{theorem}\phantomsection%
   \begin{theorem}}
  {\end{theorem}}

\newenvironment{theorempp}[1]
{\renewcommand{\thetheorem}{\ref*{#1}$''$}%
  \neutralize{theorem}\phantomsection%
  \begin{theorem}}
  {\end{theorem}}

%prime theorem
\NewDocumentEnvironment{manual}{O{theorem}m}
{%
	\addtocounter{theorem}{-1}%
	\renewcommand\thetheorem{#2}%
	\begin{#1}
	}
	{\end{#1}}
\usepackage{geometry}
\usepackage{hyperref}
\def\subsec#1{\medskip\noindent #1\hspace{1em}\ignorespaces}